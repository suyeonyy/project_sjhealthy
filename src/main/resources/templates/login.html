<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>LoginForm</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>로그인</h1>
    <form action="../member/login" method="POST">
        아이디: <input type="text" name="memberId" id="memberId"><br>
        비밀번호: <input type="password" name="memberPassword">
        <input type="submit" name="submit" value="로그인">
    </form>

    <!--
    <a th:href="@{/sjhealthy/member/login/oauth/kakao}">
        <img th:src="@{/kakao_login_medium_narrow.png}" style="width:150px; height:40px;">
    </a>
    -->
    <div>
        <a th:href="'https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=' + ${kakaoApiKey} + '&redirect_uri=' + ${kakaoRedirectUri}">
            <img th:src="@{/kakao_login_medium_narrow.png}">
        </a>
    </div>


    <button id="googleOAuth">구글 로그인</button>

    <a href="../member/find-id"><button>아이디 찾기</button></a>
    <a href="../member/find-password"><button>비밀번호 찾기</button></a>

<script th:inline="javascript">
    document.addEventListener("DOMContentLoaded", ()=> {
        const google = document.getElementById("googleOAuth");
        const client_id = /*[[${client_id}]]*/'';
        const redirect_uri = /*[[${redirect_uri}]]*/'';
        console.log("client_id" + client_id);
        console.log("redirect_uri" + redirect_uri);

        google.addEventListener("click", async (e)=>{
            e.preventDefault();

            const url = "https://accounts.google.com/o/oauth2/v2/auth?client_id=" + client_id
                + "&redirect_uri=" + redirect_uri
                + "&response_type=code&scope=email+profile"; // scope 에 요청 정보
            window.location.href = url; // 로그인 페이지로 리다이렉트
    });
});
</script>
</body>
</html>
